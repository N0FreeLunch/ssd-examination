# Ent Data Access Layer

This directory contains the data access layer generated by [entgo.io](https://entgo.io).

## Directory Structure & Guidelines

To maintain code integrity and ensure that manual changes are not lost during code generation, please follow these guidelines:

### üõ†Ô∏è Editable User Defined Files (Safe to Modify)
These files and directories are maintained by developers. `go generate` will NOT overwrite your logic here.

| File | Description |
| :--- | :--- |
| [`schema/choice.go`](schema/choice.go) | Choice Entity Definition |
| [`schema/exam.go`](schema/exam.go) | Exam Entity Definition |
| [`schema/problem.go`](schema/problem.go) | Problem Entity Definition |
| [`schema/problemtranslation.go`](schema/problemtranslation.go) | ProblemTranslation Entity Definition |
| [`schema/section.go`](schema/section.go) | Section Entity Definition |
| [`schema/topic.go`](schema/topic.go) | Topic Entity Definition |
| [`schema/unit.go`](schema/unit.go) | Unit Entity Definition |
| [`schema/versionrule.go`](schema/versionrule.go) | VersionRule Entity Definition |
| [`generate.go`](generate.go) | Ent Generation Directive |

### üö´ Auto-Generated Area (DO NOT EDIT)
These files are automatically generated by Ent. **Any manual changes will be overwritten** the next time `go generate ./internal/ent` is run.

- **Root files** (`client.go`, `exam.go`, `unit.go`, etc.): The actual ORM implementation and entity structs.
- **`migrate/`**: Database migration logic and physical schema mapping.
- **`predicate/`**: Query predicates for filtering data.
- **`mutation.go`**: Logic for tracking changes to entities.

## How to Update the Schema

1.  Modify or create files in the `schema/` directory.
2.  Run the following command from the project root:
    ```bash
    go generate ./internal/ent
    ```
3.  If any new dependencies are added (e.g., in tests), run:
    ```bash
    go mod tidy
    ```

## Best Practices
- **Always check for the `DO NOT EDIT` header** at the top of a file before making changes.
- Use **Hooks** in the `schema` files to implement data validation or side effects (like auto-assigning sequences) that must always run on creation or update.
